{"version":3,"sources":["webpack:///./src/pages/index.js"],"names":["openingTimeoutRef","IndexPage","location","useState","isArticleVisible","setIsArticleVisible","hasTimeout","setHasTimeout","isVisible","setIsVisible","article","setArticle","loading","setLoading","wrapperRef","setWrapperRef","console","log","toggleArticle","useCallback","handleOpenArticle","selectedArticle","handleCloseArticle","handleOutsideClick","event","contains","target","useEffect","setTimeout","document","addEventListener","clearTimeout","removeEventListener","className","id","onOpenArticle","timeout","onCloseArticle"],"mappings":"2FAAA,4CAIIA,EAAoB,KAwETC,UAtEG,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAAe,EACcC,oBAAS,GAAlDC,EAD2B,KACTC,EADS,OAEEF,oBAAS,GAAtCG,EAF2B,KAEfC,EAFe,OAGAJ,oBAAS,GAApCK,EAH2B,KAGhBC,EAHgB,OAIJN,mBAAS,IAAhCO,EAJ2B,KAIlBC,EAJkB,OAKJR,mBAAS,cAAhCS,EAL2B,KAKlBC,EALkB,OAMEV,mBAAS,MAAtCW,EAN2B,KAMfC,EANe,KAQlCC,QAAQC,IAAIb,EAAkBM,GAE9B,IAAMQ,EAAgBC,uBAAY,WAChCd,GAAqBD,GACrBG,GAAeD,GACfG,GAAcD,KACb,CAACA,EAAWF,EAAYF,IAErBgB,EAAoBD,uBACxB,SAACE,GACCH,IACAP,EAAWU,KAEb,CAACH,IAGGI,EAAqBH,uBAAY,WACrCD,IACAP,EAAW,MACV,CAACO,IAEEK,EAAqBJ,uBACzB,SAACK,GACKV,IAAeA,EAAWW,SAASD,EAAME,SAAWtB,GAAkBkB,MAE5E,CAAClB,EAAkBU,EAAYQ,IAgBjC,OAbAK,qBAAU,WAOR,OANA3B,EAAoB4B,YAAW,WAC7Bf,EAAW,MACV,KAEHgB,SAASC,iBAAiB,YAAaP,GAEhC,WACDvB,GAAmB+B,aAAa/B,GACpC6B,SAASG,oBAAoB,YAAaT,MAE3C,CAACA,IAGF,kBAAC,IAAD,CAAQrB,SAAUA,GAChB,6BAAS+B,UAAS,QAAUrB,EAAV,KAAqBR,EAAmB,qBAAuB,KAC/E,6BAAS8B,GAAG,WACV,kBAAC,IAAD,CAAQC,cAAef,EAAmBgB,QAAS9B,IACnD,kBAAC,IAAD,CACEI,QAASA,EACT0B,QAAS9B,EACTE,UAAWA,EACXJ,iBAAkBA,EAClBiC,eAAgBf,EAChBP,cAAeA,IAEjB,kBAAC,IAAD,CAAQqB,QAAS9B,KAEnB,6BAAS4B,GAAG","file":"component---src-pages-index-js-a1012a26924ef157f5ff.js","sourcesContent":["import React, { useCallback, useState, useEffect } from 'react'\n\nimport { Header, Main, Footer, Layout } from '../components'\n\nlet openingTimeoutRef = null\n\nconst IndexPage = ({ location }) => {\n  const [isArticleVisible, setIsArticleVisible] = useState(false)\n  const [hasTimeout, setHasTimeout] = useState(false)\n  const [isVisible, setIsVisible] = useState(false)\n  const [article, setArticle] = useState('')\n  const [loading, setLoading] = useState('is-loading')\n  const [wrapperRef, setWrapperRef] = useState(null)\n\n  console.log(isArticleVisible, article)\n\n  const toggleArticle = useCallback(() => {\n    setIsArticleVisible(!isArticleVisible)\n    setHasTimeout(!hasTimeout)\n    setIsVisible(!isVisible)\n  }, [isVisible, hasTimeout, isArticleVisible])\n\n  const handleOpenArticle = useCallback(\n    (selectedArticle) => {\n      toggleArticle()\n      setArticle(selectedArticle)\n    },\n    [toggleArticle],\n  )\n\n  const handleCloseArticle = useCallback(() => {\n    toggleArticle()\n    setArticle('')\n  }, [toggleArticle])\n\n  const handleOutsideClick = useCallback(\n    (event) => {\n      if (wrapperRef && !wrapperRef.contains(event.target) && isArticleVisible) handleCloseArticle()\n    },\n    [isArticleVisible, wrapperRef, handleCloseArticle],\n  )\n\n  useEffect(() => {\n    openingTimeoutRef = setTimeout(() => {\n      setLoading('')\n    }, 100)\n\n    document.addEventListener('mousedown', handleOutsideClick)\n\n    return () => {\n      if (openingTimeoutRef) clearTimeout(openingTimeoutRef)\n      document.removeEventListener('mousedown', handleOutsideClick)\n    }\n  }, [handleOutsideClick])\n\n  return (\n    <Layout location={location}>\n      <article className={`body ${loading} ${isArticleVisible ? 'is-article-visible' : ''}`}>\n        <section id=\"wrapper\">\n          <Header onOpenArticle={handleOpenArticle} timeout={hasTimeout} />\n          <Main\n            article={article}\n            timeout={hasTimeout}\n            isVisible={isVisible}\n            isArticleVisible={isArticleVisible}\n            onCloseArticle={handleCloseArticle}\n            setWrapperRef={setWrapperRef}\n          />\n          <Footer timeout={hasTimeout} />\n        </section>\n        <section id=\"bg\" />\n      </article>\n    </Layout>\n  )\n}\n\nexport default IndexPage\n"],"sourceRoot":""}